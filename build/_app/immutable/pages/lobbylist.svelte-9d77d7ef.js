import{S as Re,i as Me,s as Oe,e as b,t as M,k as D,c as u,a as i,h as O,d as o,m as g,b as t,g as S,M as l,G as $,j as ge,Q as se,R as Ve,E as Be,N as Ce,K as W,v as Se,T as qe}from"../chunks/index-45f71731.js";import{o as ie,q as Je,r as Z,n as fe,t as pe,s as he,d as Ue,g as Ke,U as Ge,k as Qe,a as ze}from"../chunks/stores-57d30480.js";import"../chunks/index-65a915e8.js";function je(f,c,a){const n=f.slice();return n[15]=c[a],n}function Pe(f,c){let a,n,v,N=c[15].name+"",L,j,w,y=c[15].players+"",x,T,E,_;function q(){return c[6](c[15])}return{key:f,first:null,c(){a=b("button"),n=b("a"),v=b("div"),L=M(N),j=D(),w=b("div"),x=M(y),T=D(),this.h()},l(k){a=u(k,"BUTTON",{class:!0});var m=i(a);n=u(m,"A",{href:!0,class:!0});var B=i(n);v=u(B,"DIV",{});var s=i(v);L=O(s,N),s.forEach(o),j=g(B),w=u(B,"DIV",{});var p=i(w);x=O(p,y),p.forEach(o),B.forEach(o),T=g(m),m.forEach(o),this.h()},h(){t(n,"href","/lobby"),t(n,"class","flex w-full justify-around"),t(a,"class","btn btn-base-300 w-1/2 mx-2 mb-10"),this.first=a},m(k,m){S(k,a,m),l(a,n),l(n,v),l(v,L),l(n,j),l(n,w),l(w,x),l(a,T),E||(_=$(a,"click",q),E=!0)},p(k,m){c=k,m&4&&N!==(N=c[15].name+"")&&ge(L,N),m&4&&y!==(y=c[15].players+"")&&ge(x,y)},d(k){k&&o(a),E=!1,_()}}}function Fe(f){let c,a,n,v,N,L,j,w,y,x,T,E,_=[],q=new Map,k,m,B,s,p,I,G,Q,U,h,d,X,Y,A,ae,V,z,F,oe,re,P,ne,H,J,K,be,ue,de,ee=f[2];const ye=e=>e[15].id;for(let e=0;e<ee.length;e+=1){let r=je(f,ee,e),R=ye(r);q.set(R,_[e]=Pe(R,r))}return{c(){c=b("div"),a=b("button"),n=b("a"),v=M("\u2715"),N=D(),L=b("label"),j=M("+ New Lobby"),w=D(),y=b("button"),x=M("Refresh"),T=D(),E=b("div");for(let e=0;e<_.length;e+=1)_[e].c();k=D(),m=b("input"),B=D(),s=b("label"),p=b("label"),I=b("label"),G=M("\u2715"),Q=D(),U=b("div"),h=b("label"),d=b("span"),X=M("Lobby Name"),Y=D(),A=b("input"),ae=D(),V=b("div"),z=b("label"),F=b("span"),oe=M("Lobby Password"),re=D(),P=b("input"),ne=D(),H=b("div"),J=b("button"),K=b("a"),be=M("+ Create Lobby"),this.h()},l(e){c=u(e,"DIV",{class:!0});var r=i(c);a=u(r,"BUTTON",{class:!0});var R=i(a);n=u(R,"A",{href:!0,class:!0});var me=i(n);v=O(me,"\u2715"),me.forEach(o),R.forEach(o),N=g(r),L=u(r,"LABEL",{for:!0,class:!0});var _e=i(L);j=O(_e,"+ New Lobby"),_e.forEach(o),w=g(r),y=u(r,"BUTTON",{class:!0});var ve=i(y);x=O(ve,"Refresh"),ve.forEach(o),r.forEach(o),T=g(e),E=u(e,"DIV",{class:!0});var Le=i(E);for(let ce=0;ce<_.length;ce+=1)_[ce].l(Le);Le.forEach(o),k=g(e),m=u(e,"INPUT",{type:!0,id:!0,class:!0}),B=g(e),s=u(e,"LABEL",{for:!0,class:!0});var we=i(s);p=u(we,"LABEL",{class:!0,for:!0});var C=i(p);I=u(C,"LABEL",{for:!0,class:!0});var Ee=i(I);G=O(Ee,"\u2715"),Ee.forEach(o),Q=g(C),U=u(C,"DIV",{class:!0});var le=i(U);h=u(le,"LABEL",{class:!0});var ke=i(h);d=u(ke,"SPAN",{class:!0});var Ne=i(d);X=O(Ne,"Lobby Name"),Ne.forEach(o),ke.forEach(o),Y=g(le),A=u(le,"INPUT",{type:!0,placeholder:!0,class:!0}),le.forEach(o),ae=g(C),V=u(C,"DIV",{class:!0});var te=i(V);z=u(te,"LABEL",{class:!0});var xe=i(z);F=u(xe,"SPAN",{class:!0});var Te=i(F);oe=O(Te,"Lobby Password"),Te.forEach(o),xe.forEach(o),re=g(te),P=u(te,"INPUT",{type:!0,placeholder:!0,class:!0}),te.forEach(o),ne=g(C),H=u(C,"DIV",{class:!0});var Ie=i(H);J=u(Ie,"BUTTON",{class:!0});var Ae=i(J);K=u(Ae,"A",{href:!0,class:!0});var De=i(K);be=O(De,"+ Create Lobby"),De.forEach(o),Ae.forEach(o),Ie.forEach(o),C.forEach(o),we.forEach(o),this.h()},h(){t(n,"href","/"),t(n,"class","flex w-full h-full justify-center items-center"),t(a,"class","btn btn-error p-0 w-1/4"),t(L,"for","newLobbyModal"),t(L,"class","btn rounded-none gap-2"),t(y,"class","btn btn-accent"),t(c,"class","btn-group flex flex-nowrap absolute ml-10 mt-20 sm:mt-10"),t(E,"class","flex absolute justify-center text-xl flex-wrap mt-40 sm:mt-20 w-screen"),t(m,"type","checkbox"),t(m,"id","newLobbyModal"),t(m,"class","modal-toggle"),t(I,"for","newLobbyModal"),t(I,"class","btn btn-sm btn-circle absolute right-2 top-2"),t(d,"class","label-text"),t(h,"class","label"),t(A,"type","text"),t(A,"placeholder",f[0]),t(A,"class","input input-bordered w-full max-w-xs"),t(U,"class","form-control w-full max-w-xs"),t(F,"class","label-text"),t(z,"class","label"),t(P,"type","text"),t(P,"placeholder","Type here"),t(P,"class","input input-bordered w-full max-w-xs"),t(V,"class","form-control w-full max-w-xs"),t(K,"href","/lobby"),t(K,"class","flex w-full h-full justify-center gap-2 px-4 items-center"),t(J,"class","btn btn-secondary p-0 w-1/3 mt-4"),t(H,"class","flex justify-center"),t(p,"class","modal-box relative"),t(p,"for",""),t(s,"for","newLobbyModal"),t(s,"class","modal cursor-pointer")},m(e,r){S(e,c,r),l(c,a),l(a,n),l(n,v),l(c,N),l(c,L),l(L,j),l(c,w),l(c,y),l(y,x),S(e,T,r),S(e,E,r);for(let R=0;R<_.length;R+=1)_[R].m(E,null);S(e,k,r),S(e,m,r),S(e,B,r),S(e,s,r),l(s,p),l(p,I),l(I,G),l(p,Q),l(p,U),l(U,h),l(h,d),l(d,X),l(U,Y),l(U,A),se(A,f[0]),l(p,ae),l(p,V),l(V,z),l(z,F),l(F,oe),l(V,re),l(V,P),se(P,f[1]),l(p,ne),l(p,H),l(H,J),l(J,K),l(K,be),ue||(de=[$(y,"click",f[5]),$(A,"input",f[7]),$(P,"input",f[8]),$(J,"click",f[3])],ue=!0)},p(e,[r]){r&20&&(ee=e[2],_=Ve(_,r,ye,1,e,ee,q,E,qe,Pe,null,je)),r&1&&t(A,"placeholder",e[0]),r&1&&A.value!==e[0]&&se(A,e[0]),r&2&&P.value!==e[1]&&se(P,e[1])},i:Be,o:Be,d(e){e&&o(c),e&&o(T),e&&o(E);for(let r=0;r<_.length;r+=1)_[r].d();e&&o(k),e&&o(m),e&&o(B),e&&o(s),ue=!1,Ce(de)}}}function He(f,c,a){let n,v,N,L,j,w;W(f,Ge,s=>a(9,n=s)),W(f,Qe,s=>a(10,v=s)),W(f,pe,s=>a(11,N=s)),W(f,ze,s=>a(12,L=s)),W(f,fe,s=>a(13,j=s)),W(f,ie,s=>a(14,w=s));let y=n+"'s Lobby",x="",T=[];function E(){ie.set(Je(Z(v,"lobbies/"))),fe.set(Z(v,"lobbies/"+w.key)),pe.set(Z(v,"lobbies/"+w.key+"/players/"+L)),he(w,{name:y,pass:x}),he(N,{name:n,host:!0})}function _(s){ie.set(Z(v,"lobbies/")),fe.set(Ue(w,s)),pe.set(Ue(j,"players/"+L)),he(N,{name:n,host:!1})}function q(){a(2,T=[]),Ke(Z(v,"lobbies")).then(s=>{let p=s.toJSON(),I=Object.keys(p);I.sort(function(h,d){return h==d?0:h>d?1:-1});let G=[],Q=[],U=[];for(let h=0;h<I.length;h++){const d=I[h];let X=p[d].name;G.push(X);let Y=Object.keys(p[d].players).length;Q.push(Y);let A=p[d].pass;U.push(A)}for(let h=0;h<I.length;h++){let d={id:"",name:"",players:0,pass:""};d.id=I[h],d.name=G[h],d.players=Q[h],d.pass=U[h],T.push(d)}a(2,T)}).catch(s=>{console.log("No Lobbies"),console.log(s)})}q(),Se(()=>{n==""&&(window.location.href="/")});const k=s=>{_(s.id)};function m(){y=this.value,a(0,y)}function B(){x=this.value,a(1,x)}return[y,x,T,E,_,q,k,m,B]}class Ze extends Re{constructor(c){super(),Me(this,c,He,Fe,Oe,{})}}export{Ze as default};
