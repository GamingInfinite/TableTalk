import{S as nt,i as lt,s as st,F as ct,e as y,k as Y,c as x,a as m,d as c,m as L,b as a,g as C,G as R,H as dt,I as bt,J as pt,q as wt,o as ht,K as I,L as ut,t as j,M as U,h as M,N,O as h,E as gt,P as mt,j as vt}from"../chunks/index-51dc6ce2.js";import{G as X,p as K,a as W,b as Q,r as Z,s as $,c as q,g as tt,d as rt,U as B,e as ot,f as ft,h as yt,i as et,j as xt,k as kt,l as at,m as it}from"../chunks/stores-72b0dafd.js";import"../chunks/index-a8a2b196.js";const{window:zt}=ut;function _t(p){let o,l,s,d,u,w,i,n,v,b,r,e,z,E,_,f,t,k,D,G,F;return{c(){o=y("label"),l=j("Sign In"),s=Y(),d=y("input"),u=Y(),w=y("label"),i=y("label"),n=y("label"),v=j("\u2715"),b=Y(),r=y("button"),e=U("svg"),z=U("path"),E=j(`\r
          Sign-in with Google`),_=Y(),f=y("button"),t=U("svg"),k=U("path"),D=j(`\r
          Sign-in Anonymously`),this.h()},l(g){o=x(g,"LABEL",{for:!0,class:!0});var S=m(o);l=M(S,"Sign In"),S.forEach(c),s=L(g),d=x(g,"INPUT",{type:!0,id:!0,class:!0}),u=L(g),w=x(g,"LABEL",{for:!0,class:!0});var H=m(w);i=x(H,"LABEL",{class:!0,for:!0});var A=m(i);n=x(A,"LABEL",{for:!0,class:!0});var P=m(n);v=M(P,"\u2715"),P.forEach(c),b=L(A),r=x(A,"BUTTON",{class:!0});var O=m(r);e=N(O,"svg",{class:!0,xmlns:!0,viewBox:!0});var V=m(e);z=N(V,"path",{fill:!0,d:!0}),m(z).forEach(c),V.forEach(c),E=M(O,`\r
          Sign-in with Google`),O.forEach(c),_=L(A),f=x(A,"BUTTON",{class:!0});var T=m(f);t=N(T,"svg",{class:!0,xmlns:!0,viewBox:!0});var J=m(t);k=N(J,"path",{fill:!0,d:!0}),m(k).forEach(c),J.forEach(c),D=M(T,`\r
          Sign-in Anonymously`),T.forEach(c),A.forEach(c),H.forEach(c),this.h()},h(){a(o,"for","signInModal"),a(o,"class","btn btn-primary"),a(d,"type","checkbox"),a(d,"id","signInModal"),a(d,"class","modal-toggle"),a(n,"for","signInModal"),a(n,"class","btn btn-sm btn-circle absolute right-2 top-2"),a(z,"fill","currentColor"),a(z,"d","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"),a(e,"class","inline-block h-4"),a(e,"xmlns","http://www.w3.org/2000/svg"),a(e,"viewBox","0 0 488 512"),a(r,"class","btn btn-ghost gap-2"),a(k,"fill","currentColor"),a(k,"d","M224 256c70.7 0 128-57.31 128-128s-57.3-128-128-128C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3C77.61 304 0 381.6 0 477.3c0 19.14 15.52 34.67 34.66 34.67h378.7C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304z"),a(t,"class","inline-block h-4"),a(t,"xmlns","http://www.w3.org/2000/svg"),a(t,"viewBox","0 0 448 512"),a(f,"class","btn btn-ghost gap-2"),a(i,"class","modal-box relative"),a(i,"for",""),a(w,"for","signInModal"),a(w,"class","modal cursor-pointer")},m(g,S){C(g,o,S),h(o,l),C(g,s,S),C(g,d,S),C(g,u,S),C(g,w,S),h(w,i),h(i,n),h(n,v),h(i,b),h(i,r),h(r,e),h(e,z),h(r,E),h(i,_),h(i,f),h(f,t),h(t,k),h(f,D),G||(F=[R(r,"click",p[6]),R(f,"click",p[5])],G=!0)},p:gt,d(g){g&&c(o),g&&c(s),g&&c(d),g&&c(u),g&&c(w),G=!1,mt(F)}}}function Et(p){let o,l,s,d,u,w,i,n,v,b;return{c(){o=y("div"),l=y("label"),s=j(p[0]),d=Y(),u=y("ul"),w=y("li"),i=y("a"),n=j("Sign Out"),this.h()},l(r){o=x(r,"DIV",{class:!0});var e=m(o);l=x(e,"LABEL",{tabindex:!0,class:!0});var z=m(l);s=M(z,p[0]),z.forEach(c),d=L(e),u=x(e,"UL",{tabindex:!0,class:!0});var E=m(u);w=x(E,"LI",{});var _=m(w);i=x(_,"A",{});var f=m(i);n=M(f,"Sign Out"),f.forEach(c),_.forEach(c),E.forEach(c),e.forEach(c),this.h()},h(){a(l,"tabindex","0"),a(l,"class","btn btn-ghost m-1"),a(u,"tabindex","0"),a(u,"class","dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52"),a(o,"class","dropdown dropdown-end")},m(r,e){C(r,o,e),h(o,l),h(l,s),h(o,d),h(o,u),h(u,w),h(w,i),h(i,n),v||(b=R(i,"click",p[7]),v=!0)},p(r,e){e&1&&vt(s,r[0])},d(r){r&&c(o),v=!1,b()}}}function St(p){let o,l,s,d,u;function w(r,e){return r[0]!=""?Et:_t}let i=w(p),n=i(p);const v=p[9].default,b=ct(v,p,p[8],null);return{c(){o=y("div"),n.c(),l=Y(),b&&b.c(),this.h()},l(r){o=x(r,"DIV",{class:!0});var e=m(o);n.l(e),e.forEach(c),l=L(r),b&&b.l(r),this.h()},h(){a(o,"class","absolute right-0 top-0 mr-8 mt-8")},m(r,e){C(r,o,e),n.m(o,null),C(r,l,e),b&&b.m(r,e),s=!0,d||(u=R(zt,"beforeunload",p[10]),d=!0)},p(r,[e]){i===(i=w(r))&&n?n.p(r,e):(n.d(1),n=i(r),n&&(n.c(),n.m(o,null))),b&&b.p&&(!s||e&256)&&dt(b,v,r,r[8],s?pt(v,r[8],e,null):bt(r[8]),null)},i(r){s||(wt(b,r),s=!0)},o(r){ht(b,r),s=!1},d(r){r&&c(o),n.d(),r&&c(l),b&&b.d(r),d=!1,u()}}}function Ct(p,o,l){let s,d,u,w,i,n;I(p,xt,t=>l(1,s=t)),I(p,Q,t=>l(2,d=t)),I(p,K,t=>l(3,u=t)),I(p,q,t=>l(4,w=t)),I(p,W,t=>l(11,i=t)),I(p,kt,t=>l(12,n=t));let{$$slots:v={},$$scope:b}=o;const r=new X;s.onAuthStateChanged(t=>{t&&(K.set(t),W.set(t.uid),Q.set(Z(n,"players/"+i)),t.isAnonymous==!0?($(d,{name:"Anon"}),q.set(!0)):(tt(rt(Z(n,"players/"),i)).then(k=>{k.child("name").exists()||($(d,{name:t.displayName}),B.set(t.displayName))}),q.set(!1)),ot&&ot.set(t.photoURL),tt(rt(d,"name")).then(k=>{k.val()!=null&&B.set(k.val())}))});const e=()=>{ft(s)},z=()=>{yt(s,r).then(t=>{X.credentialFromResult(t).accessToken,t.user}).catch(t=>{t.code,t.message,t.customData.email,X.credentialFromError(t)})},E=()=>{w&&(at(u),it(d)),et(s).then(()=>{B.set("")}).catch(t=>{console.log(t)}),window.location.href="/"};var _="";B.subscribe(t=>{l(0,_=t)});const f=()=>{w&&(at(u),it(d),et(s).then(()=>{B.set("")}).catch(t=>{console.log(t)}))};return p.$$set=t=>{"$$scope"in t&&l(8,b=t.$$scope)},[_,s,d,u,w,e,z,E,b,v,f]}class Lt extends nt{constructor(o){super(),lt(this,o,Ct,St,st,{})}}export{Lt as default};
